import{_ as b,o as _,e as P,w as a,b as t,a as n,d as h,c as v,j as x,F as E,r as o,t as c,p as L,l as V}from"./app-CTQqvN_H.js";const N={data(){return{tableData:[],itemsPerPage:3,currentPage:1}},computed:{paginatedItems(){if(!this.tableData||this.tableData.length===0)return[];const e=(this.currentPage-1)*this.itemsPerPage;return this.tableData.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.tableData.length/this.itemsPerPage)}},async created(){await this.getdata()},methods:{editItem(e){console.log("Edit item:",e)},async deleteItem(e,s){if(confirm("Are you sure you want to delete this complaint?"))try{await fetch(`/api/complaints/${e}`,{method:"DELETE"});const d=(this.currentPage-1)*this.itemsPerPage+s;this.tableData.splice(d,1),alert("Complaint deleted successfully")}catch(d){console.error("Error deleting complaint:",d),alert("Failed to delete complaint")}},handlePageChange(e){this.currentPage=e},async getdata(){const s=await(await fetch("/api/complaints-list")).json();this.tableData=s.data}}},D=e=>(L("data-v-3b7d8f9b"),e=e(),V(),e),$={class:"d-flex align-center"},B={class:"d-flex justify-space-between align-center"},F=D(()=>t("h2",{class:"text-h4"},"List of Complaints",-1)),S=D(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"First Name"),t("th",null,"Last Name"),t("th",null,"Address"),t("th",null,"Complaint"),t("th",null,"Mobile Number"),t("th",null,"Email"),t("th",null,"Actions")])],-1)),j={class:"ma-5"};function A(e,s,d,w,m,r){const p=o("v-btn"),i=o("v-col"),u=o("v-row"),f=o("v-icon"),C=o("v-table"),I=o("v-pagination"),y=o("v-card");return _(),P(y,{class:"pa-4"},{default:a(()=>[t("div",$,[n(u,null,{default:a(()=>[n(i,{cols:"12"},{default:a(()=>[t("div",B,[F,t("div",null,[n(p,{color:"primary",onClick:e.createData,"append-icon":"mdi-plus"},{default:a(()=>[h("Create Data")]),_:1},8,["onClick"])])])]),_:1})]),_:1})]),n(C,{id:"anchor-dataset-list",class:"mt-4"},{default:a(()=>[S,t("tbody",null,[(_(!0),v(E,null,x(r.paginatedItems,(l,g)=>(_(),v("tr",{key:l.id},[t("td",null,c(l.id),1),t("td",null,c(l.first_name),1),t("td",null,c(l.last_name),1),t("td",null,c(l.address),1),t("td",null,c(l.complaint),1),t("td",null,c(l.mobile_num),1),t("td",null,c(l.email),1),t("td",null,[n(i,null,{default:a(()=>[n(f,{color:"blue",onClick:k=>r.editItem(g)},{default:a(()=>[h("mdi-eye-outline")]),_:2},1032,["onClick"]),n(f,{color:"red",onClick:k=>r.deleteItem(l.id,g)},{default:a(()=>[h("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]),_:1}),t("div",j,[n(u,null,{default:a(()=>[n(i,{cols:"11"},{default:a(()=>[n(I,{modelValue:m.currentPage,"onUpdate:modelValue":s[0]||(s[0]=l=>m.currentPage=l),length:r.totalPages,onInput:r.handlePageChange,rounded:"circle"},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})])]),_:1})}const M=b(N,[["render",A],["__scopeId","data-v-3b7d8f9b"]]),T={components:{DataList:M},computed:{},mounted(){console.log("Mounted Test")}};function U(e,s,d,w,m,r){const p=o("DataList"),i=o("v-col"),u=o("v-row");return _(),P(u,{class:"pa-4"},{default:a(()=>[n(i,{cols:"12",md:"12"},{default:a(()=>[n(p)]),_:1})]),_:1})}const z=b(T,[["render",U]]);export{z as default};
